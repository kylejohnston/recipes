---
// PURPOSE: VIEW A SINGLE POST/RECIPE
import Head from '../components/BaseHead.astro';
import MainNav from '../components/MainNav.astro';
import PostContent from '../components/PostContent.astro';

const { content } = Astro.props;
const { title, description, pubDate, heroImage, permalink, alt } = content;
---
<html lang="en">
	<head>
		<Head {title} {description} {permalink} />
	</head>

	<body class="mx-auto"><!-- copied -->
		<MainNav />
		<div class="post wrapper rounded-lg py-2">
            <PostContent {title} {heroImage} {pubDate} {alt} {description}>
				<slot /> <!-- add content from .md -->
			</PostContent>
		</div>
        <div id="confirmationMessage" class="copied">Copied!</div>
	</body>
</html>

<script>
let quoteText = document.querySelector('h1');
let handleCopyClick = document.querySelector('#recipeTitle');

handleCopyClick.addEventListener('click', () => {
    let text = quoteText.textContent;
    toClipboard(text);
});

function toClipboard(text) {
    const textArea = document.createElement('textarea');
    textArea.value = text;

    // Make the text area invisible
    textArea.style.position = 'fixed';
    textArea.style.top = '-9999px';

    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();

    try {
    document.execCommand('copy');
    alert(`üëç copied!`);
    } catch (err) {
    console.error('Failed to copy ', err);
    alert('Copy failed. Please copy the text manually.');
    } finally {
    document.body.removeChild(textArea);
    }
}
</script>
    
